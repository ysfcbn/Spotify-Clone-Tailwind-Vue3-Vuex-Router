import{P as x}from"./PodcastEpisodes.b35a89d8.js";import{E as f}from"./EpisodeOptions.6ef2f5d7.js";import{I as v}from"./Info.09b40751.js";import{_,a as l,r,o as i,c as a,b as s,d as w,i as d,w as E,t as c,F as b,e as F,g as y,f as k}from"./index.85d68b45.js";const B={name:"Episodes",components:{PodcastEpisodes:x,EpisodeOptions:f,Info:v},props:["episode","index"],data(){return{episodes:!1}},computed:{getToken(){return this.$store.getters.accessToken},getCurrentUser(){return this.$store.getters.getCurrentUser},currentUserID(){var e;return(e=this.getCurrentUser)==null?void 0:e.id},userName(){var e;return(e=this.getCurrentUser)==null?void 0:e.display_name},userAvatar(){var e,o;return(o=(e=this.getCurrentUser)==null?void 0:e.images[0])==null?void 0:o.url},getFavEpisodes(){return this.$store.getters["episodes/getFavEpisodes"]},totalEpisode(){return this.getFavEpisodes.total},userFavEpisodes(){return this.getFavEpisodes.items},getUserFavEpisodes(){var e,o;return(o=(e=this.getFavEpisodes)==null?void 0:e.items)==null?void 0:o.length},favEpisodesIDs(){return this.userFavEpisodes.map(e=>e.episode.id).join(",")}},methods:{async fetchFavEpisodes(){await l.get("https://api.spotify.com/v1/me/episodes?limit=50",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(({data:e})=>{console.log(e),this.$store.dispatch("episodes/favEpisodes",e)}).catch(e=>console.log(e))},async isUserFavEpisode(){await l.get("https://api.spotify.com/v1/me/episodes/contains?ids="+this.favEpisodesIDs,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.getToken}}).then(({data:e})=>{this.$store.dispatch("episodes/isFavEpisode",e)}).catch(e=>console.log(e))}},async created(){console.log("episodes Mounted"),this.episodes=!0,this.getUserFavEpisodes||await this.fetchFavEpisodes(),await this.isUserFavEpisode(),this.header=document.getElementById("header"),this.episodesEl=document.getElementById("episodes"),this.options={root:null,threshold:[.1,.4]},this.observer=new IntersectionObserver(e=>{this.header.classList.toggle("podcast-intersec-bg1",e[0].intersectionRatio<=.4),this.header.classList.toggle("podcast-intersec-bg2",e[0].intersectionRatio<=.1),e[0].intersectionRatio>=.1?this.$store.dispatch("controller/closeHeaderBtn"):this.$store.dispatch("controller/showHeaderBtn")},this.options),this.observer.observe(this.episodesEl)},beforeUnmount(){console.log("Episodes unMounted"),this.observer.unobserve(this.episodesEl),this.header.classList.remove("podcast-intersec-bg1"),this.header.classList.remove("podcast-intersec-bg2"),this.episodes=!1},unmounted(){this.$store.dispatch("controller/closeHeaderBtn")}},U={class:"podcast--page box-border"},C={id:"episodes",class:"p-5 max-h-[800px] min-h-[340px] w-full mt-[-66px] relative bg-gradient-to-b from-podcastGreen to-podcastGreen2 shadow-[2px_0px_5px_5px_rgba(0,0,0,0.4)] bg-gradient-to-b from-darkpurple via-purpl4 to-dark-1",style:{height:"326px"}},I={class:"flex items-end justify-start h-full lg:ml-[1rem]"},A=s("div",{class:"flex sm:w-[192px] sm:min-w-[192px] xl:h-[232px] xl:w-[232px] xl:min-w-[232px] shadow-[0_8px_40px_10px_rgba(0,0,0,0.6)] rounded-[12px]"},[s("div",{class:"flex items-center justify-center sm:w-[192px] sm:min-w-[192px] sm:h-[192px] xl:h-[232px] xl:w-[232px] xl:min-w-[232px] bg-podcastGreen rounded-md"},[s("svg",{role:"img",height:"64",width:"64",viewBox:"0 0 24 24",class:"text-green5"},[s("path",{fill:"currentColor",d:"M7 1a3 3 0 00-3 3v17.167c0 1.448 1.657 2.27 2.81 1.393L12 18.612l5.19 3.948c1.153.876 2.81.055 2.81-1.393V4a3 3 0 00-3-3H7z"})])])],-1),L={class:"flex flex-col text-white font-semibold px-4"},T=s("h2",{class:""},"\xC7ALMA L\u0130STES\u0130",-1),V=s("span",null,[s("h1",{class:"w-full sm:text-3xl md:text-5xl xl:text-8xl tracking-tighter py-2"}," B\xF6l\xFCmlerin "),s("h2",{id:"info"})],-1),j={class:"flex flex-wrap mt-2 text-white w-full text-xs sm3:text-sm h-full font-semibold"},z={class:"w-full flex items-center flex-nowrap shrink-0"},M={key:0,class:"w-7 h-7"},N=["src"],D={class:"ml-2"},H={class:"before:content-['\u2022'] before:mx-1"},G=s("div",{class:"bg-gradient-to-b from-podcastGreen4 dark absolute w-full h-[212px] left-0 shrink-0 z-0"},null,-1),P=s("div",{class:"w-full h-[6.8rem] relative flex items-start py-[24px]"},[s("div",{class:"w-full ml-[1.2rem] flex items-center lg:ml-[2rem]"},[s("button",{class:"rounded-full bg-green3 p-[0.9rem] cursor-default hover:scale-105"},[s("span",null,[s("svg",{role:"img",height:"28",width:"28",viewBox:"0 0 24 24",class:""},[s("path",{fill:"currentColor",d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"})]),s("svg",{role:"img",height:"28",width:"28",viewBox:"0 0 24 24",class:"hidden"},[s("path",{d:"M5.7 3a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7H5.7zm10 0a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7h-2.6z"})])])])])],-1),$={class:"sm:pl-5 lg:p-5 lg:ml-[1rem]"};function R(e,o,S,O,p,t){const h=r("router-link"),m=r("PodcastEpisodes"),u=r("Info");return i(),a("section",U,[s("div",C,[s("div",I,[A,s("div",L,[T,V,s("div",j,[s("div",z,[t.userAvatar?(i(),a("div",M,[s("img",{class:"rounded-full",src:t.userAvatar,alt:"user"},null,8,N)])):w("",!0),s("span",D,[d(h,{class:"hover:underline cursor-pointer",style:{"font-weight":"700"},to:{name:"user",params:{id:t.currentUserID}}},{default:E(()=>[y(c(t.userName),1)]),_:1},8,["to"])]),s("span",H,c(t.totalEpisode)+" b\xF6l\xFCm",1)])])])])]),G,P,(i(!0),a(b,null,F(t.userFavEpisodes,(n,g)=>(i(),k(m,{key:n.id,index:g,episode:n.episode,episodes:p.episodes,isUserFavEpisode:t.isUserFavEpisode},null,8,["index","episode","episodes","isUserFavEpisode"]))),128)),s("section",$,[d(u)])])}var W=_(B,[["render",R]]);export{W as default};
