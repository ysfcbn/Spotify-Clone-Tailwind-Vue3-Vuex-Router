import{_ as m,a as u,o,c as l,b as s,n as g,t as p,r as f,F as k,e as y,i as T,f as v}from"./index.6991af30.js";import{I as _}from"./Info.fa1c277b.js";const x={props:["artist"],data(){return{leftClick:!1}},methods:{async selectedArtist(t,e){var i;const r=e.target.closest(".artist--card").id;((i=e.target.closest("#playBtn"))==null?void 0:i.id)==="playBtn"?(await this.fetchArtistTopTracks(r),await this.fetchArtist("https://api.spotify.com/v1/artists/"+r,!0),await this.playArtistTopTracks({uri:this.artistTopTrackUris,index:this.currentPlayingTrackIndex,type:"artist",artistID:r})):this.$router.push({name:"artist",params:{id:r}})},async fetchArtist(t){await u.get(t,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.getToken}}).then(({data:e})=>{this.$store.dispatch("artists/currentArtist",e)}).catch(e=>console.log(e))},async fetchArtistTopTracks(t){await u.get("https://api.spotify.com/v1/artists/"+t+"/top-tracks?market=US",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.getToken}}).then(({data:e})=>{console.log(e),this.$store.dispatch("artists/topTracks",e.tracks)}).catch(e=>console.log(e))},async playArtistTopTracks(t){console.log(t),console.log(t.index),this.isPlayingArtistTopTracks?await this.$store.dispatch("controller/pauseCurrentTrack"):(t.index=await this.currentPlayingTrackIndex,await this.$store.dispatch("controller/playArtitsTopTracks",t))}},computed:{getToken(){return this.$store.getters.accessToken},artistTopTracks(){return this.$store.getters["artists/getTopTracks"]},artistTopTrackUris(){return this.artistTopTracks.map(t=>t.uri)},getCurrentlyPlayingTrack(){return this.$store.getters["controller/getCurrentlyPlayingTrack"]},currentTrackID(){var t,e;return(e=(t=this.getCurrentlyPlayingTrack)==null?void 0:t.item)==null?void 0:e.id},findCurrentPlayingTrackIndex(){return this.artistTopTracks.indexOf(this.artistTopTracks.find(t=>t.id===this.currentTrackID))},currentPlayingTrackIndex(){return this.findCurrentPlayingTrackIndex+1?this.findCurrentPlayingTrackIndex:0},isPlayingArtistTopTracks(){var t,e,r,i;return((e=(t=this.getCurrentlyPlayingTrack)==null?void 0:t.item)==null?void 0:e.artists[0].id)===this.artist.id&&!((r=this.getCurrentlyPlayingTrack)!=null&&r.context)&&((i=this.getCurrentlyPlayingTrack)==null?void 0:i.is_playing)}}},b={class:"h-full group"},A={class:"w-full mb-5 relative"},w=["src"],C={role:"img",height:"24",width:"24",viewBox:"0 0 24 24"},I={key:0,fill:"text-black",d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"},P={key:1,fill:"text-black",d:"M5.7 3a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7H5.7zm10 0a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7h-2.6z"},B={class:"flex items-start flex-col justify-center"},$={class:"text-white max-w-full truncate"},j={class:"text-sm text-lightest max-w-full truncate capitalize"};function z(t,e,r,i,c,n){var h,d;return o(),l("button",{onClick:e[2]||(e[2]=a=>n.selectedArtist(t.msg,a)),class:"artist--card bg-dark1 hover:bg-opacblack1 ease duration-300 w-full h-auto cursor-pointer rounded-md flex-1 isolate p-4 relative"},[s("div",b,[s("div",A,[s("img",{class:"h-full w-full object-cover rounded-full shadow-[0px_5px_15px_8px_rgba(0,0,0,0.4)]",src:(d=(h=r.artist)==null?void 0:h.images[0])==null?void 0:d.url,alt:"artist"},null,8,w),s("div",{class:g([{"opacity-100 translate-y-[-0.4rem]":n.isPlayingArtistTopTracks,"opacity-0":!n.isPlayingArtistTopTracks},"bg-dark rounded-full right-0 bottom-0 absolute flex items-center mx-2 group-hover:block group-hover:opacity-100 transition ease-in duration-200 group-hover:translate-y-[-0.4rem]"])},[s("button",{onMousedown:e[0]||(e[0]=a=>c.leftClick=!0),onMouseup:e[1]||(e[1]=a=>c.leftClick=!1),id:"playBtn",class:g([{" bg-green3/80 scale-80":c.leftClick,"hover:scale-106 bg-green3/95 hover:bg-green3":!c.leftClick},"p-[10px] rounded-full cursor-default shadow-[0px_5px_6px_2px_rgba(0,0,0,0.4)]"])},[s("span",null,[(o(),l("svg",C,[n.isPlayingArtistTopTracks?(o(),l("path",P)):(o(),l("path",I))]))])],34)],2)]),s("div",B,[s("div",$,p(r.artist.name),1),s("div",j,p(r.artist.type),1)])])])}var E=m(x,[["render",z]]);const F={name:"FavArtists",components:{artistItems:E,Info:_},data(){return{favArtists:!0}},computed:{getFavArtists(){return this.$store.getters["artists/getFavArtists"]}},mounted(){this.favArtists=!0,console.log("favArtists Mounted"),this.header=document.getElementById("header"),this.favArtistsEl=document.getElementById("fav--artists"),this.headerHeight=document.getElementById("header").getBoundingClientRect().height,this.options={root:null,threshold:[.4,.95],rootMargin:`-${this.headerHeight}px`},this.observer=new IntersectionObserver(t=>{console.log(t),this.header.classList.toggle("librarySec4-intersec-bg1",t[0].intersectionRatio<=.95),this.header.classList.toggle("librarySec4-intersec-bg2",t[0].intersectionRatio<=.4)},this.options),console.log(this.observer),this.observer.observe(this.favArtistsEl)},beforeUnmount(){console.log("favPodcasts Unmounted"),this.observer.unobserve(this.favArtistsEl),this.header.classList.remove("librarySec4-intersec-bg1"),this.header.classList.remove("librarySec4-intersec-bg2"),this.favArtists=!1}},S={class:"p-5 mt-2 lg:ml-[1rem]"},L={class:"relative"},M=s("div",{id:"fav--artists",class:"flex justify-between h-[2.5rem]"},[s("div",{class:"h-fit flex-end"},[s("h2",{class:"text-[1.5rem] text-white leading-7 tracking-tight font-semibold"}," Sanat\xE7\u0131lar ")])],-1),D={class:"relative grid grid-cols-colArt gap-6 auto-rows-auto mt-4"};function U(t,e,r,i,c,n){const h=f("artistItems"),d=f("Info");return o(),l("section",S,[s("div",L,[M,s("div",D,[(o(!0),l(k,null,y(n.getFavArtists,a=>(o(),v(h,{key:a.id,id:a.id,artist:a},null,8,["id","artist"]))),128))])]),s("section",null,[T(d)])])}var R=m(F,[["render",U]]);export{R as default};
