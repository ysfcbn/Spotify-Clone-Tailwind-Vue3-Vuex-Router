import{T as w}from"./TrackItems.72562643.js";import{T as C}from"./TrackItemsHeader.73764cd2.js";import{_ as H,a as S,r as y,o as h,c as d,b as s,d as I,i as f,w as l,g,t as u,n as b,F as k,e as T,f as _}from"./index.62f1d9c3.js";const F={name:"FavoriteSongs",components:{TrackItems:w,trackItemsHeader:C},data(){return{favoriteSongs:!1,albumOptions:!1,contextType:"collection",episodeOptions:!1,leftClick:!1,options2:"",favSongEl:null,observer2:null,presentation:null,headerHeight:document.getElementById("header").getBoundingClientRect().height,bodyHeight:document.body.getBoundingClientRect().height,bodyWidth:document.body.getBoundingClientRect().width,margin:!1}},methods:{async fetchFavTracks(){await S.get("https://api.spotify.com/v1/me/tracks?limit=50",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.getToken}}).then(({data:e})=>{console.log(e.items),this.$store.dispatch("favTracks/getTracks",e)}).catch(e=>console.log(e))},async playFavSongs(e){var t,i,a;console.log(e),this.isPlayingFavSongsContextUri?await this.$store.dispatch("controller/pauseCurrentTrack"):(console.log(this.currentPlayingTrackIndex),e.index=this.currentPlayingTrackIndex,((i=(t=this.getCurrentlyPlayingTrack)==null?void 0:t.context)==null?void 0:i.type)==="collection"&&!this.currentPlayingTrackIndex?(console.log((a=this.getCurrentlyPlayingTrack.context)==null?void 0:a.type),await this.$store.dispatch("controller/playCurrentTrack",e)):await this.$store.dispatch("controller/playSelectedContext",e))},removeGreenHeartFavTracks(e){e.children[4].children[0].classList.remove("greenHeart"),e.children[4].children[0].classList.add("emptyHeart"),e.children[4].children[0].classList.add("animationEmptyHeart")},uploadDate(e){const t=new Date,i=new Date(e),a=Math.abs(Math.round(t.getTime()-i.getTime())),o=new Date(e).getFullYear(),n=this.getMonths[new Date(e).getMonth()],m=new Date(e).getDate(),x=Math.round(a/1e3/60/60),v=Math.abs(Math.floor(a/1e3/60/60*60)),r=Math.floor((a/1e3/60/60*60-v)*60);if(Math.abs(Math.floor((i-t)/(1e3*60*60*24)))<31){const p=Math.abs(Math.round((t.getTime()-i.getTime())/1e3/60/60/24));return p>0?p+" g\xFCn \xF6nce":a<6e4?r+" saniye \xF6nce":a>6e4&&a<36e5?v+" dakika \xF6nce":a>36e5?x+" saat \xF6nce":""}else return`${m} ${n} ${o}`},trackDuration(e){const t=Math.floor(e/6e4),i=Math.floor(e%6e4/1e3);return t+":"+(i<10?"0":"")+i},toggleEpisodeOptions(){this.episodeOptions=!this.episodeOptions},resizeOption2(e){if(window.innerHeight-92<=64){this.bodyHeight=+window.innerHeight-92;return}return this.bodyHeight=+window.innerHeight-92,this.bodyWidth=+window.innerWidth-92,this.observer2&&this.observer2.unobserve(this.presentation),e}},computed:{isAuth(){return this.$store.getters.isAuth},getToken(){return this.$store.getters.accessToken},userName(){var e;return(e=this.$store.getters.getCurrentUser)==null?void 0:e.display_name},userAvatar(){var e,t;return(t=(e=this.$store.getters.getCurrentUser)==null?void 0:e.images[0])==null?void 0:t.url},currentUserID(){var e;return(e=this.$store.getters.getCurrentUser)==null?void 0:e.id},currentUserUri(){var e;return(e=this.$store.getters.getCurrentUser)==null?void 0:e.uri},allFavTracks(){return this.$store.getters["favTracks/getTracks"].items},userFavSongsContextUri(){return`${this.currentUserUri}:collection`},getCurrentlyPlayingTrack(){return this.$store.getters["controller/getCurrentlyPlayingTrack"]},currentTrackID(){var e,t;return(t=(e=this.getCurrentlyPlayingTrack)==null?void 0:e.item)==null?void 0:t.id},findCurrentPlayingTrackIndex(){var e;return((e=this.getCurrentlyPlayingTrack)==null?void 0:e.context.type)==="collection"?this.allFavTracks.indexOf(this.allFavTracks.find(t=>t.track.id===this.currentTrackID)):0},currentPlayingTrackIndex(){return this.findCurrentPlayingTrackIndex+1?this.findCurrentPlayingTrackIndex:0},isPlayingFavSongsContextUri(){var e,t,i;return((t=(e=this.getCurrentlyPlayingTrack)==null?void 0:e.context)==null?void 0:t.uri)===this.userFavSongsContextUri&&((i=this.getCurrentlyPlayingTrack)==null?void 0:i.is_playing)},isClickHeaderBtn(){return this.$store.getters["controller/isClickHeaderBtn"]},favTracks(){var e;return(e=this.$store.getters["favTracks/getTracks"])==null?void 0:e.items},totalTrack(){var e;return(e=this.$store.getters["favTracks/getTracks"])==null?void 0:e.total},trackImage(){var e;return(e=this.favTracks.images[0])==null?void 0:e.url},getMonths(){return this.$store.getters["controller/getMonths"]}},watch:{bodyHeight(e,t){e!==t&&(this.bodyHeight=+e,this.bodyHeight=+this.bodyHeight.toFixed(1),this.options2={root:document.body,threshold:0,rootMargin:`${+(this.headerHeight*100/this.bodyHeight).toFixed(1)*-1}% 0px -${100-+(this.headerHeight*100/this.bodyHeight).toFixed(1)}% 0px`},this.observer2&&(this.observer2=new IntersectionObserver(i=>{i[0].isIntersecting?(this.presentation.classList.add("prebg"),this.margin=!1):(this.presentation.classList.remove("prebg"),this.margin=!0)},this.resizeOption2(this.options2))),this.presentation&&this.observer2.observe(this.presentation))},bodyWidth(e,t){e!==t&&(this.observer2&&(this.observer2=new IntersectionObserver(i=>{i[0].isIntersecting?(this.presentation.classList.add("prebg"),this.margin=!1):(this.presentation.classList.remove("prebg"),this.margin=!0)},this.resizeOption2(this.options2))),this.presentation&&this.observer2.observe(this.presentation))},isPlayingFavSongsContextUri(e){e?this.$store.dispatch("controller/isPlayingHeaderBtn",e):this.$store.dispatch("controller/isPlayingHeaderBtn",e)},async isClickHeaderBtn(e,t){e!==t&&await this.playFavSongs({uri:this.userFavSongsContextUri,index:this.currentPlayingTrackIndex,type:this.contextType,id:this.currentTrackID})}},async created(){var e;window.addEventListener("resize",this.resizeOption2),this.favoriteSongs=!0,console.log("FavoriteSongs Mounted"),await this.isPlayingFavSongsContextUri?this.$store.dispatch("controller/isPlayingHeaderBtn",!0):this.$store.dispatch("controller/isPlayingHeaderBtn",!1),await((e=this.favTracks)==null?void 0:e.length)||this.fetchFavTracks(),setTimeout(()=>{this.presentation=document.querySelector(".presentation"),this.body=document.body,this.header=document.getElementById("header"),this.favSongEl=document.getElementById("favoriteSongss"),console.log(this.favSongEl),this.options={root:null,threshold:[.1,.4]},this.observer=new IntersectionObserver(t=>{this.header.classList.toggle("fav-songs-intersec-bg1",t[0].intersectionRatio<=.4),this.header.classList.toggle("fav-songs-intersec-bg2",t[0].intersectionRatio<=.1),t[0].intersectionRatio>=.1?this.$store.dispatch("controller/closeHeaderBtn"):this.$store.dispatch("controller/showHeaderBtn")},this.options),this.favSongEl&&this.observer.observe(this.favSongEl),this.options2={root:document.body,threshold:0,rootMargin:`${+(this.headerHeight*100/this.bodyHeight).toFixed(1)*-1}% 0px -${100-+(this.headerHeight*100/this.bodyHeight).toFixed(1)}% 0px`},this.observer2=new IntersectionObserver(t=>{t[0].isIntersecting?(this.presentation.classList.add("prebg"),this.margin=!1):(this.presentation.classList.remove("prebg"),this.margin=!0)},this.options2),this.presentation&&this.observer2.observe(this.presentation)},1)},beforeUnmount(){console.log("FavoriteSongs unMounted"),this.favSongEl&&(window.removeEventListener("resize",this.resizeOption2),this.observer.unobserve(this.favSongEl),this.observer2.unobserve(this.presentation),this.presentation.classList.remove("prebg"),this.header.classList.remove("fav-songs-intersec-bg1"),this.header.classList.remove("fav-songs-intersec-bg2")),this.margin=!0,this.favoriteSongs=!1,this.$store.dispatch("controller/isClickHeaderBtn",null)},unmounted(){this.$store.dispatch("controller/closeHeaderBtn"),this.$store.dispatch("controller/isPlayingHeaderBtn",null)}},M={class:"box-border"},P={id:"favoriteSongss",class:"bg-bgpurple p-5 max-h-[800px] min-h-[300px] w-full mt-[-66px] relative shadow-[2px_0px_5px_5px_rgba(0,0,0,0.4)] bg-gradient-to-b from-bgpurple to-purple2",style:{height:"311px"}},B={class:"flex items-end justify-start h-full lg:ml-[1rem]"},U=s("div",{class:"flex mb:w-[192px] mb:min-w-[192px] xl:h-[232px] xl:w-[232px] xl:min-w-[232px] shadow-[0_8px_40px_10px_rgba(0,0,0,0.6)] rounded-[12px]"},[s("img",{class:"object-cover mb:h-full w-full",src:"https://t.scdn.co/images/3099b3803ad9496896c43f22fe9be8c4.png",alt:"fav"})],-1),D={class:"flex flex-col text-white font-semibold px-4"},L=s("h2",{class:""},"\xC7ALMA L\u0130STES\u0130",-1),$=s("span",null,[s("h1",{class:"w-full sm:text-3xl md:text-4xl lg1:text-6xl xl:text-8xl tracking-tighter py-2",style:{"font-weight":"700"}}," Be\u011Fenilen \u015Eark\u0131lar ")],-1),E={class:"flex flex-wrap mt-2 text-white w-full text-xs sm3:text-sm h-full font-semibold"},O={class:"w-full flex items-center flex-nowrap shrink-0"},z={key:0,class:"w-8 h-8"},A=["src"],N={class:"ml-2"},R={class:"before:content-['\u2022'] before:mx-2"},j=s("span",{class:"ml-1"},"\u015Fark\u0131",-1),G=s("div",{class:"absolute w-full h-[212px] left-0 shrink-0 z-0 bg-gradient-to-b from-purple4 to-dark"},null,-1),V={class:"w-full h-[5.8rem] relative flex items-start pt-[24px]"},W={class:"w-full ml-[1.2rem] flex items-center lg:ml-[2rem]"},q={role:"img",height:"26",width:"26",viewBox:"0 0 24 24"},Y={key:0,fill:"currentColor",d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"},J={key:1,fill:"currentColor",d:"M5.7 3a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7H5.7zm10 0a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7h-2.6z"},K={class:"trackItems--container mt-2"},Q=["src"];function X(e,t,i,a,o,n){const m=y("router-link"),x=y("trackItemsHeader"),v=y("TrackItems");return h(),d("section",M,[s("div",P,[s("div",B,[U,s("div",D,[L,$,s("div",E,[s("div",O,[n.userAvatar?(h(),d("div",z,[s("img",{class:"rounded-full",src:n.userAvatar,alt:"user"},null,8,A)])):I("",!0),s("span",N,[f(m,{class:"hover:underline cursor-pointer",to:{name:"user",params:{id:n.currentUserID}},href:"#"},{default:l(()=>[g(u(n.userName),1)]),_:1},8,["to"])]),s("span",R,[g(u(n.totalTrack)+" ",1),j])])])])])]),G,s("div",V,[s("div",W,[s("button",{onMousedown:t[0]||(t[0]=r=>o.leftClick=!0),onMouseup:t[1]||(t[1]=r=>o.leftClick=!1),onClick:t[2]||(t[2]=r=>n.playFavSongs(e.uri={uri:n.userFavSongsContextUri,index:0,type:o.contextType,id:n.currentTrackID})),class:b([{"bg-green3/70 scale-[1]":o.leftClick,"hover:scale-[1.04] bg-green3/95 hover:bg-green3":!o.leftClick},"rounded-full p-[12px] cursor-default"])},[(h(),d("svg",q,[n.isPlayingFavSongsContextUri?(h(),d("path",J)):(h(),d("path",Y))]))],34)])]),s("div",{class:b([{"mx-5":o.margin},"playlistContainer relative h-full min-w-[450]"])},[f(x,{margin:o.margin,favoriteSongs:o.favoriteSongs},null,8,["margin","favoriteSongs"]),s("div",K,[(h(!0),d(k,null,T(n.favTracks,({track:r},p)=>(h(),_(v,{key:r.id,id:r.id,uri:n.userFavSongsContextUri,track:r,trackID:r.id,itemUri:r.uri,contextType:o.contextType,index:p,favoriteSongs:o.favoriteSongs,margin:o.margin,removeGreenHeartFavTracks:n.removeGreenHeartFavTracks},{trackIndex:l(()=>[]),trackImg:l(()=>{var c;return[s("img",{class:"object-fit w-[40px] h-[40px]",src:(c=r.album.images[2])==null?void 0:c.url,alt:""},null,8,Q)]}),trackName:l(()=>[f(m,{to:{name:"track",params:{id:`${r.id}`}}},{default:l(()=>[g(u(r.name),1)]),_:2},1032,["to"])]),artist:l(()=>[(h(!0),d(k,null,T(r.artists,c=>(h(),_(m,{class:"hover:underline",key:c.id,to:{name:"artist",params:{id:`${c.id}`}}},{default:l(()=>[g(u(r.artists.length>1?c.name===r.artists[r.artists.length-1].name?c.name:c.name+", ":c.name),1)]),_:2},1032,["to"]))),128))]),albumName:l(()=>[f(m,{to:{name:"album",params:{id:`${r.album.id}`}}},{default:l(()=>[g(u(r.album.name),1)]),_:2},1032,["to"])]),favTime:l(()=>[g(u(n.uploadDate(e.date=n.favTracks[p].added_at)),1)]),duration:l(()=>[g(u(n.trackDuration(e.duration=r.duration_ms)),1)]),_:2},1032,["id","uri","track","trackID","itemUri","contextType","index","favoriteSongs","margin","removeGreenHeartFavTracks"]))),128))])],2)])}var se=H(F,[["render",X]]);export{se as default};
