import{_ as S,o as r,c as n,b as s,d as u,j as T,a as h,r as w,k as F,t as m,n as _,i as v,f as y,F as E,e as I,p as P,h as j}from"./index.01bc20c2.js";import{P as B}from"./PodcastEpisodes.c2945637.js";import{E as A}from"./EpisodeOptions.a678c857.js";import{I as C}from"./Info.60a9dcd9.js";const D={name:"ShowOptions",props:["follow","addRemoveShow"],data(){return{showOptions:!1,visible:!1}},methods:{toggleOptions(){this.showOptions=!this.showOptions},paylasDropDown(){this.paylasDropDown=!0},close(e){this.$el.contains(e.target)||(this.showOptions=!1)}},mounted(){document.addEventListener("click",this.close)},beforeUnmount(){document.removeEventListener("click",this.close)}},O=s("svg",{role:"img",height:"32",width:"32",viewBox:"0 0 24 24",class:"hover:text-white"},[s("path",{fill:"currentColor",d:"M4.5 13.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm15 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm-7.5 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})],-1),z={key:0,class:"z-40 absolute bg-dark2 top-[2rem] left-0 p-[4px] h-fit w-[13.6rem] text-opacwhite3 whitespace-normal rounded shadow-[0px_15px_15px_1px_rgba(0,0,0,0.4)]"},M={key:0,class:"text-xs md:text-sm"},U={key:1,class:"text-xs md:text-sm"},L=s("button",{class:"cursor-default flex items-center justify-between w-full"},[s("span",{class:"text-xs md:text-sm"},"Payla\u015F"),s("span",{class:"text-white"},[s("svg",{role:"img",height:"16",width:"16",class:"rotate-90",viewBox:"0 0 16 16"},[s("path",{fill:"currentColor",d:"M14 10L8 4l-6 6h12z"})])])],-1),R={key:0,class:"z-40 absolute bg-dark2 top-[2.7rem] left-[13.4rem] p-[4px] h-fit w-[13.8rem] text-opacwhite3 whitespace-normal rounded shadow-[0px_15px_15px_1px_rgba(0,0,0,0.4)]"},$=T('<li class="w-full flex justify-start p-[6px] md:p-[8px] hover:bg-dark3 border-opacwhite"><button class="cursor-default"><span class="text-xs md:text-sm">Program Ba\u011Flant\u0131s\u0131n\u0131 Kopyala</span></button></li><li class="w-full flex justify-start p-[6px] md:p-[8px] hover:bg-dark3"><button class="cursor-default"><span class="text-xs md:text-sm">Program\u0131 g\xF6m</span></button></li>',2),H=[$],N=s("li",{class:"w-full flex justify-start p-[6px] md:p-[8px] hover:bg-dark3"},[s("button",{class:"cursor-default"},[s("span",{class:"text-xs md:text-sm"},"Masa\xFCst\xFC uygulumas\u0131nda a\xE7")])],-1);function V(e,t,i,l,a,o){return r(),n("button",{onClick:t[3]||(t[3]=(...c)=>o.toggleOptions&&o.toggleOptions(...c)),class:"text-lightest cursor-default w-fit relative"},[O,a.showOptions?(r(),n("ul",z,[s("li",{onClick:t[0]||(t[0]=(...c)=>i.addRemoveShow&&i.addRemoveShow(...c)),class:"w-full flex justify-start p-[6px] md:p-[8px] hover:bg-dark3 truncate cursor-default"},[i.follow?(r(),n("span",U,"Takip Etmeyi B\u0131rak ")):(r(),n("span",M,"Takip Et "))]),s("li",{onMouseenter:t[1]||(t[1]=c=>a.visible=!0),onMouseleave:t[2]||(t[2]=c=>a.visible=!1),class:"group w-full flex justify-start p-[6px] md:p-[8px] hover:bg-dark3 border-b border-opacwhite"},[L,a.visible?(r(),n("ul",R,H)):u("",!0)],32),N])):u("",!0)])}var q=S(D,[["render",V]]);const K={name:"ShowPage",components:{ShowOptions:q,PodcastEpisodes:B,EpisodeOptions:A,Info:C},props:{index:{required:!1},episode:{required:!1},id:{type:String,required:!0}},data(){return{podcastShowPage:!0,episodeOptions:!1,follow:!1,toggle:!1,seeMoreBtn:!0,more:"... daha fazlas\u0131n\u0131 g\xF6ster",less:"daha az\u0131n\u0131 g\xF6ster"}},methods:{async fetchFavEpisodes(){return await h.get("https://api.spotify.com/v1/me/episodes?limit=50",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(({data:e})=>{console.log(e),this.$store.dispatch("episodes/favEpisodes",e)}).catch(e=>console.log(e))},isNewEpisode(){var i,l;const e=new Date,t=Math.abs(Math.round((e.getTime()-new Date((i=this.nextEpisode)==null?void 0:i.release_date).getTime())/1e3/60/60/24));return(l=this.nextEpisode)!=null&&l.resume_point.fully_played?!1:t<=7},selectedEpisode(e,t){var i;t.target.closest("#play")||t.target.closest("#share")||t.target.closest("#add-library")||t.target.closest("#options")||t.target.closest("#episode--options")||this.$router.push({name:"episode",params:{id:`${(i=this.nextEpisode)==null?void 0:i.id}`}})},async fetchFavShows(){return await h.get("https://api.spotify.com/v1/me/shows?limit=50",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(({data:e})=>{console.log(e),this.$store.dispatch("shows/favShows",e)}).catch(e=>console.log(e))},async fetchShow(){await h.get("https://api.spotify.com/v1/shows/"+this.$route.params.id,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(({data:e})=>{this.$store.dispatch("shows/currentShow",e)}).catch(e=>console.log(e))},async checkUserFavShow(){await h.get("https://api.spotify.com/v1/me/shows/contains?ids="+this.$route.params.id,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(({data:e})=>{this.$store.dispatch("shows/currentShowIsFav",...e)}).catch(e=>console.log(e))},async checkUserFavEpisode(){await h.get("https://api.spotify.com/v1/me/episodes/contains?ids="+this.allEpisodesIDs,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.getToken}}).then(({data:e})=>{this.$store.dispatch("episodes/currentEpisodeIsFav",e)}).catch(e=>console.log(e))},async removeAddEpisode(e,t){var a;console.log(e);let i;e?i=e:i=t.target.closest(".episodeContainer").id,console.log(i);const l=(a=this.favEpisodes.find(o=>o.episode.id===i))==null?void 0:a.episode.id;l?await this.deleteEpisode(l):await this.addEpisode(i),await this.fetchFavEpisodes(),this.podcastShowPage&&await this.checkUserFavEpisode()},async addEpisode(e){await fetch("https://api.spotify.com/v1/me/episodes?ids="+e,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(t=>{console.log(t.status),t.status===200&&(console.log(e,"ADDED!!!!"),this.isUserFavEpisode())}).catch(t=>console.log(t))},async deleteEpisode(e){await h.delete("https://api.spotify.com/v1/me/episodes?ids="+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(t=>{console.log(t.status),t.status===200&&(console.log(e,"DELETED!!!!"),this.fetchFavEpisodes())}).catch(t=>console.log(t))},removeEpisodeOptionsFunc(e){e&&this.removeAddEpisode(e)},async followShow(){await fetch("https://api.spotify.com/v1/me/shows?ids="+this.$route.params.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(e=>{console.log(e.status),this.$store.dispatch("controller/modalInfoType",{type:"show",status:!0}),e.status===200&&this.checkUserFavShow()}).catch(e=>console.log(e))},async unfollowShow(){await h.delete("https://api.spotify.com/v1/me/shows?ids="+this.$route.params.id,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+await this.getToken}}).then(e=>{console.log(e.status),this.$store.dispatch("controller/modalInfoType",{type:"show",status:!1}),e.status===200&&this.checkUserFavShow()}).catch(e=>console.log(e))},async addRemoveShow(){this.currentShowIsFav?(await this.unfollowShow(),await this.fetchFavShows()):(await this.followShow(),await this.fetchFavShows())},htmlDescription(){const e=document.getElementById("show--description"),t=document.getElementById("show--description1");let i;typeof this.currentShow.html_description=="string"?(i=this.currentShow.html_description.split(" "),i.length>10?i.length=Math.floor(i.length/2):this.seeMoreBtn=!1):e.innerHTML=`${this.currentShow.html_description}`;const l=[...e.getElementsByTagName("p")];l.length?(console.log(l[0]),l[0].length=20,console.log(l[0]),t.innerHTML=`${l[0].innerHTML}`):t.innerHTML=i.join(" "),this.toggle&&(t.innerHTML=`${this.currentShow.html_description}`)},toggleDescription(){this.toggle=!this.toggle,this.htmlDescription()}},computed:{isAuth(){return this.$store.getters.isAuth},getToken(){return this.$store.getters.accessToken},getMonths(){return this.$store.getters["controller/getMonths"]},currentShow(){return this.$store.getters["shows/getCurrentShow"]},favEpisodes(){return this.$store.getters["episodes/getFavEpisodes"].items},allEpisodes(){var e,t;return(t=(e=this.currentShow)==null?void 0:e.episodes)==null?void 0:t.items},nextEpisode(){return this.allEpisodes[this.allEpisodes.indexOf(this.allEpisodes.filter(e=>e.resume_point.fully_played===!1)[0])]},nextEpisodeIndex(){return this.allEpisodes.indexOf(this.allEpisodes.filter(e=>e.resume_point.fully_played===!1)[0])},resumePosition(){var e;return(e=this.nextEpisode)==null?void 0:e.resume_point.resume_position_ms},showImage(){var e,t;return(t=(e=this.currentShow)==null?void 0:e.images[0])==null?void 0:t.url},allEpisodesIDs(){var e;return(e=this.allEpisodes)==null?void 0:e.map(t=>t.id).join(",")},currentEpisodeIsFav(){return this.$store.getters["episodes/getCurrentEpisodeIsFav"]},episodeIsFav(){return this.currentEpisodeIsFav[this.nextEpisodeIndex]},currentShowIsFav(){return this.$store.getters["shows/getCurrentShowIsFav"]}},async created(){console.log("podcastShowPage Mounted!"),this.podcastShowPage=!0,await this.fetchShow(),await this.checkUserFavEpisode(),await this.checkUserFavShow(),this.htmlDescription(),this.header=document.getElementById("header"),this.showPageEl=document.getElementById("showPage"),this.options={root:null,threshold:[.1,.4]},this.observer=new IntersectionObserver(e=>{this.header.classList.toggle("podcast-intersec-bg1",e[0].intersectionRatio<=.4),this.header.classList.toggle("podcast-intersec-bg2",e[0].intersectionRatio<=.1),e[0].intersectionRatio>=.1?this.$store.dispatch("controller/closeHeaderBtn"):this.$store.dispatch("controller/showHeaderBtn")},this.options),this.observer.observe(this.showPageEl)},beforeUnmount(){this.observer.unobserve(this.showPageEl),this.header.classList.remove("podcast-intersec-bg1"),this.header.classList.remove("podcast-intersec-bg2"),this.podcastShowPage=!1}},p=e=>(P("data-v-0779c415"),e=e(),j(),e),W={class:"box-border"},Y={class:"relative flex items-end justify-start h-full lg:ml-[1rem]"},G={class:"flex sm:w-[192px] sm:min-w-[192px] xl:h-[232px] xl:w-[232px] xl:min-w-[232px] shadow-[0_8px_40px_10px_rgba(0,0,0,0.6)] rounded-[12px]"},J=["src"],Q={class:"flex flex-col text-white font-semibold px-4"},X=p(()=>s("h2",{class:""},"PODCAST",-1)),Z={class:"w-full sm:text-3xl md:text-5xl xl:text-8xl tracking-tighter py-2 cursor-default"},ee=p(()=>s("h2",{id:"info"},null,-1)),te={class:"flex flex-wrap mt-2 text-white w-full text-xs sm3:text-sm h-full font-semibold"},se={class:"flex items-center flex-nowrap shrink-0"},oe={class:"flex items-center w-[16.2rem] text-xl"},ie={class:"w-full h-[5rem] relative flex flex-col items-start justify-center pt-5"},ae={class:"w-full ml-[1.5rem] lg:ml-[2.3rem]"},re={class:"flex justify-start items-center"},le={key:0,class:"text-sm",style:{"font-weight":"600"}},ne={key:1,class:"text-sm",style:{"font-weight":"600"}},ce={class:"ml-2 flex items-center"},he={class:"sm:ml-[1.5rem] lg:ml-[2.3rem] lg3:mr-[2rem] mb-[4rem]"},de={class:"grid sm:max-w-[760px] lg3:max-w-[1600px] lg3:grid-cols-colShow mt-5 gap-8"},pe={class:"sm:max-w-[790px] lg3:row-span-3 lg3:col-start-2 lg3:col-end-3"},me=p(()=>s("h2",{class:"text-white1 text-2xl tracking-tighter",style:{"font-weight":"700"}}," Hakk\u0131nda ",-1)),we=p(()=>s("div",{id:"show--description",class:"absolute hidden text-lightest max-w-[45rem]"},null,-1)),ue={class:"py-[16px] relative text-lightest max-w-[45rem]"},ge=p(()=>s("p",{id:"show--description1"},null,-1)),xe={key:0,class:"text-white font-semibold cursor-pointer"},fe={key:1,class:"absolute bottom-[-5px] left-[-2px] text-white font-semibold cursor-pointer w-[8rem] hover:underline"},_e={class:"lg3:row-start-1 lg3:row-end-3 lg3:col-start-1 lg3:col-end-2 sm:max-w-[790px] lg3:max-w-[1600px] max-h-[188px] bg-opacwhite1 rounded-[5px]"},ve=p(()=>s("div",{class:"lg3:row-start-3 lg3:col-start-1 lg3:col-end-2 sm:ml-[1.5rem] lg:ml-[1.4rem]"},[s("h3",{class:"text-white text-2xl lg3:mt-4 tracking-tighter",style:{"font-weight":"700"}}," T\xFCm B\xF6l\xFCmler ")],-1)),ye={class:"lg3:row-start-3 lg3:mt-16 lg3:row-end-3 lg3:col-start-1 lg3:col-end-2 sm:max-w-[790px] lg3:max-w-[1600px]"},Ee={class:"sm:ml-[1.5rem] lg:ml-[2.3rem]"};function Se(e,t,i,l,a,o){var x,f;const c=w("ShowOptions"),g=w("PodcastEpisodes"),b=w("Info");return r(),n(E,null,[s("section",W,[s("div",{id:"showPage",class:"p-5 h-[326px] max-h-[800px] min-h-[340px] w-full mt-[-66px] relative shadow-[2px_0px_5px_5px_rgba(0,0,0,0.4)]",style:F({"--bgShowImage":`url(${o.showImage})`})},[s("div",Y,[s("div",G,[s("img",{class:"object-cover h-full w-full rounded-[12px]",src:(f=(x=o.currentShow)==null?void 0:x.images[0])==null?void 0:f.url,alt:"podcast"},null,8,J)]),s("div",Q,[X,s("span",null,[s("h1",Z,m(o.currentShow.name),1),ee]),s("div",te,[s("div",se,[s("span",oe,m(o.currentShow.publisher),1)])])])])],4)]),s("div",ie,[s("div",ae,[s("div",re,[s("div",{class:_({"w-[9.5rem]":o.currentShowIsFav,"w-[6.6rem]":!o.currentShowIsFav})},[s("button",{onClick:t[0]||(t[0]=(...d)=>o.addRemoveShow&&o.addRemoveShow(...d)),type:"button",class:_([{"w-[8rem] border-white":o.currentShowIsFav,"hover:border-white border-opacwhite2":!o.currentShowIsFav},"border cursor-default w-[5.5rem] h-fit text-white px-2 py-1 rounded-[5px]"])},[o.currentShowIsFav?(r(),n("span",le,"TAK\u0130P ED\u0130L\u0130YOR")):(r(),n("span",ne," TAK\u0130P ET"))],2)],2),s("div",ce,[v(c,{follow:o.currentShowIsFav,addRemoveShow:o.addRemoveShow},null,8,["follow","addRemoveShow"])])])])]),s("div",he,[s("div",de,[s("div",pe,[me,we,s("div",ue,[ge,a.seeMoreBtn?(r(),n("button",{key:0,onClick:t[1]||(t[1]=(...d)=>o.toggleDescription&&o.toggleDescription(...d))},[a.toggle?(r(),n("p",fe,m(a.less),1)):(r(),n("span",xe,m(a.more),1))])):u("",!0)])]),s("div",_e,[(r(),y(g,{key:o.nextEpisode.id,id:o.nextEpisode.id,index:o.nextEpisodeIndex,episode:o.nextEpisode,podcastShowPage:a.podcastShowPage,isNextEpisode:!0,checkUserFavEpisode:o.checkUserFavEpisode},null,8,["id","index","episode","podcastShowPage","checkUserFavEpisode"]))]),ve,s("div",ye,[(r(!0),n(E,null,I(o.allEpisodes,(d,k)=>(r(),y(g,{class:"sm:max-w-[790px] lg3:max-w-[1600px]",key:d.id,index:k,episode:d,podcastShowPage:a.podcastShowPage,checkUserFavEpisode:o.checkUserFavEpisode},null,8,["index","episode","podcastShowPage","checkUserFavEpisode"]))),128))])]),s("div",Ee,[v(b)])])],64)}var Ie=S(K,[["render",Se],["__scopeId","data-v-0779c415"]]);export{Ie as default};
